<ion-row>
  <ion-col>
    <div class="scrollable-form">
      <ion-card>
        <ion-card-header
          ><ion-card-title class="ion-text-center" style="color: blue"
            >Crear publicacion</ion-card-title
          ></ion-card-header
        >
        <ion-card-content>
          <form [formGroup]="Loginform" (ngSubmit)="onSubmit()">
            <!-- titulo -->
            <ion-input
              type="text"
              label="Titulo"
              label-placement="stacked"
              fill="outline"
              formControlName="titulo"
              name="titulo"
              required
            ></ion-input>
            <ion-note
              [style.color]="'red'"
              *ngIf="
                Loginform.get('titulo')?.invalid &&
                Loginform.get('titulo')?.touched
              "
            >
              El título es obligatorio.
            </ion-note>

            <!-- descripcion -->

            <ion-input
              type="text"
              label="Descripcion"
              label-placement="stacked"
              fill="outline"
              formControlName="descripcion"
              name="Descripcion"
              required
            ></ion-input>
            <ion-note
              [style.color]="'red'"
              *ngIf="
                Loginform.get('descripcion')?.invalid &&
                Loginform.get('descripcion')?.touched
              "
            >
              La descripción es obligatoria.
            </ion-note>

            <!-- Ubicacion-->
            <ion-input
              type="text"
              label="Ubicacion"
              label-placement="stacked"
              fill="outline"
              formControlName="ubicacion"
              name="Ubicacion"
              required
            ></ion-input>
            <ion-note
              *ngIf="
                Loginform.get('ubicacion')?.invalid &&
                Loginform.get('ubicacion')?.touched
              "
            >
              La ubicación es obligatoria.
            </ion-note>

            <!--etiquetas-->
            <ion-input
              type="text"
              label="Etiquetas"
              label-placement="stacked"
              fill="outline"
              formControlName="etiquetas"
              name="Etiquetas"
              required
            ></ion-input>
            <div *ngIf="showTagsList" class="suggestions-list">
              <div
                *ngFor="let tag of availableTagsList"
                class="tag-option"
                (click)="selectTag(tag.etiqueta)"
              >
                {{ tag.etiqueta }}
              </div>
            </div>
            <ion-note *ngIf="Loginform.get('etiquetas')?.hasError('required')">
              Ingrese sus etiquetas
            </ion-note>

            <div class="selected-tags">
              <div *ngFor="let tag of selectedTags" class="tag-chip">
                {{ tag }}
                <span class="remove-tag" (click)="removeTag(tag)">&times;</span>
              </div>
            </div>

            <!--selección de imagen -->
            <div class="image-upload-section">
              <input type="file" (change)="fileChangeEvent($event)" />
              <image-cropper
                [imageChangedEvent]="imageChangedEvent"
                [maintainAspectRatio]="true"
                [aspectRatio]="4 / 3"
                format="png"
                (imageCropped)="imageCropped($event)"
                (imageLoaded)="imageLoaded($event)"
                (cropperReady)="cropperReady()"
                (loadImageFailed)="loadImageFailed()"
              ></image-cropper>
              <div class="cropped-preview">
                <img [src]="croppedImage" *ngIf="croppedImage" />
              </div>
            </div>
            <button mat-raised-button (click)="save()">enviar</button>
            <!--envío -->
            <ion-button mat-raised-button (click)="salir()" color="primary">
              Cancelar
            </ion-button>
          </form>
        </ion-card-content>
      </ion-card>
    </div>
  </ion-col>
</ion-row>
