<ion-row
  ><ion-col>
    <div class="scrollable-form">
      <ion-card>
        <ion-card-header>
          <ion-card-title>
            <h2>Editar perfil</h2>
          </ion-card-title></ion-card-header
        >

        <ion-card-content>
          <form
            class="form"
            [formGroup]="updateForm"
            (ngSubmit)="clickRegister()"
          >
            <!-- Usuario -->
            <ion-input
              type="text"
              label="Usuario"
              label-placement="stacked"
              fill="outline"
              formControlName="usuario"
              name="Usuario"
            ></ion-input>

            <!-- Celular -->
            <ion-input
              type="text"
              label="Numero de celular"
              label-placement="stacked"
              fill="outline"
              formControlName="celular"
              name="celular"
            ></ion-input>

            <!-- Contraseña -->
            <ion-input
              type="password"
              label="Contraseña"
              label-placement="stacked"
              fill="outline"
              formControlName="contrasena"
              name="contrasena"
            ></ion-input>
            <ion-note
              [style.color]="'red'"
              *ngIf="
                updateForm
                  .get('contrasena')
                  ?.hasError('customPasswordValidator') &&
                updateForm.get('contrasena')?.touched
              "
            >
              La contraseña debe tener al menos una mayúscula, minúscula,
              símbolo, número y ser mayor a 8 caracteres
            </ion-note>
            <ion-note
              [style.color]="'red'"
              *ngIf="
                updateForm.get('contrasena')?.hasError('required') &&
                updateForm.get('contrasena')?.touched
              "
            >
              Para realizar los cambios debes cambiar tu contraseña
            </ion-note>

            <!-- Confirmar Contraseña -->
            <ion-input
              type="password"
              label="Confirmar Contraseña"
              label-placement="stacked"
              fill="outline"
              formControlName="confirmContrasena"
              name="confirmContrasena"
              required
            ></ion-input>
            <ion-note
              [style.color]="'red'"
              *ngIf="
                updateForm.get('confirmContrasena')?.hasError('required') &&
                updateForm.get('confirmContrasena')?.touched
              "
            >
              Ingrese una contraseña
            </ion-note>
            <ion-note
              [style.color]="'red'"
              *ngIf="
                updateForm.hasError('crossConfirmPasswordError') &&
                updateForm.get('confirmContrasena')?.touched
              "
            >
              La contraseña no coincide, verifique
            </ion-note>

            <!-- Campo de selección de intereses -->

            <ion-input
              type="text"
              label="Intereses"
              label-placement="stacked"
              fill="outline"
              formControlName="intereses"
              name="Intereses"
              (click)="toggleInterestsList()"
            ></ion-input>
            <div *ngIf="showInterestsList" class="suggestions-list">
              <div
                *ngFor="let interest of availableInterests"
                class="interest-option"
                (click)="selectInterest(interest)"
              >
                {{ interest }}
              </div>
            </div>

            <div class="selected-interests">
              <div
                *ngFor="let interest of selectedInterests"
                class="interest-chip"
              >
                {{ interest }}
                <span class="remove-interest" (click)="removeInterest(interest)"
                  >&times;</span
                >
              </div>
            </div>

            <!-- Descripcion -->
            <ion-input
              type="text"
              label="Descripcion"
              label-placement="stacked"
              fill="outline"
              formControlName="descripcion"
              name="Descripcion"
            ></ion-input>

            <div>
              <input type="file" (change)="fileChangeEvent($event)" />
              <image-cropper
                class="image-upload-section"
                [imageChangedEvent]="imageChangedEvent"
                [maintainAspectRatio]="true"
                [aspectRatio]="4 / 3"
                format="png"
                (imageCropped)="imageCropped($event)"
                (imageLoaded)="imageLoaded($event)"
                (cropperReady)="cropperReady()"
                (loadImageFailed)="loadImageFailed()"
              ></image-cropper>
              <div class="cropped-preview">
                <img [src]="croppedImage" *ngIf="croppedImage" />
              </div>
            </div>
            <ion-button mat-raised-button color="primary" type="submit">
              Realizar cambios
            </ion-button>
          </form>
        </ion-card-content>
      </ion-card>
    </div></ion-col
  ></ion-row
>
